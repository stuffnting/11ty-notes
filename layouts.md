
# Layouts

## Template file location

Files in the `_includes` folder are not processed as full template files, that will become separate files in `_site`, they are used by other templates.

11ty template files can be stored in a different folder, which is specified in the config file (see [here](<https://www.11ty.dev/docs/config/#directory-for-layouts-(optional)>)).

## The template file

The layout file to use for each template is specified in the YAML front matter as `layout`. The path to the template file is relative to `_includes`.

Content can be in several mixed and matched forms.

**Markdown**

Note, markdown files are preprocessed by Liquid (this can be changed), before they are processed as markdown. This means that template tags can be included in the markdown.

```yaml
---
layout: mylayout.njk
title: My Rad Markdown Blog Post
---
# {{ title }}
```

**Nunjucks/Liquid**

```hbs
---
layout: mylayout.njk 
title: My Rad Nunjucks Blog Post 
---

<h1>{{title}}</h1>
```

**11ty.js**

JS template files are a bit different, because the don't use front matter.

```js
module.exports = {
  data: {
    layout: "mylayout.njk",
    title: "My Rad JavaScript Blog Post",
  },
  render(data) {
    return `<h1>${data.title}</h1>`;
  },
};
```

## The layout file

The `_includes/mylayout.njk` file.

```hbs
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }}</title>
  </head>
  <body>
    {{ content | safe }}
  </body>
</html>
```

`safe` is a [Nunjucks filter](https://mozilla.github.io/nunjucks/templating.html#safe), which prevents escaping of the content. If `safe` is not used, the content will be escaped.

Note, layout files can contain their own front matter, which is merged with the content's data; the content's data takes precedence.

## Chaining layout files

Layout files can be chained, so that layout files, themselves, use other layout files.

***Template file***

```yaml
---
layout: mainlayout.njk
title: My Rad Blog
---
# My Rad Markdown Blog P
```

***mainlayout.njk***

```hbs
---
layout: mylayout.njk
myOtherData: hello
---
<main>
  {{ content | safe }}
</main>
```

***mylayout.njk***

```hbs
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{title}}</title>
  </head>
  <body>
    {{ content | safe }}
  </body>
</html>
```

## Default layout

In 11ty there is no way to set a default layout file. Therefore, if `layout` is not defined for a template, the page will consist only of the HTML generated by that template file.

There are two ways to get around this:

**1\. Make a file called `_data/layout.js` and add;**

```js
module.exports = 'layout.njk';
```

**2\. Use `addGlobalData` in the config file;**

```js
  eleventyConfig.addGlobalData('layout', 'layout.njk');
```

Now, any template without a `layout` specified will use this file.
 
## Layout aliasing

If multiple files all have the same layout specified, and you want to easily change all of them to use a different layout, the following can be added to the `.eleventy.js` config file.

```js
module.exports = function (eleventyConfig) {
  eleventyConfig.addLayoutAlias("post", "layouts/post.njk");
};
```

## Extensionless layout files

The layout file's extension can be omitted, although this can be problematic. and this can be disabled. See [here](https://www.11ty.dev/docs/layouts/#omitting-the-layouts-file-extension) for more.

## Logging data from template and layout files

**Built-in log filter**

**Use Nunjucks `dump` filer**

This dumps the data into the template.

```
{{ items | dump }}
```

**Make your own `log` filer and dump to the console**

In the `.eleventy.js` config file:

```js
eleventyConfig.addFilter("log", (value) => {
  console.log(value);
});
```

And, then in the template/layout file:

```hbs
{{ article | log }}
<li class="article"> ... </li>
```

## Generating an excerpt using `setFrontMatterParsingOptions`

Excerpts can be generated from the template content, and added to the `page` object, which is available in the body of the template.

***.eleventy.js***

```js
module.exports = function (eleventyConfig) {
  eleventyConfig.setFrontMatterParsingOptions({
    excerpt: true,
    // Optional, default is "---"
    excerpt_separator: "<!-- excerpt -->",
  });
};
```

***post-1.md***

```js
---
title: My page title
---
This is the start of my content and this will be shown as the excerpt.
<!-- excerpt -->
This is a continuation of my contentâ€¦
```

`page.excerpt` now holds This is the start of my content and this will be shown as the excerpt.

For example:

```js
{
  excerpt: '\n' +
    'Magna aliquet suspendisse accumsan aliquet dis purus.\n' +
    '\n',
  date: 2023-07-08T12:24:17.827Z,
  inputPath: './posts/post-2.md',
  fileSlug: 'post-2',
  filePathStem: '/posts/post-2',
  outputFileExtension: 'html',
  templateSyntax: 'liquid,md',
  url: '/posts/post-2/',
  outputPath: '_site/posts/post-2/index.html'
}
```

The except does not need to be stored in `page.excerpt`, and it can be assigned to a custom variable:

```js
module.exports = function (eleventyConfig) {
  eleventyConfig.setFrontMatterParsingOptions({
    excerpt: true,
    // Eleventy custom option
    // The variable where the excerpt will be stored.
    excerpt_alias: "my_custom_excerpt",
  });
};
```

Now the excerpt can be accessed in the templates as `my_custom_excerpt`.